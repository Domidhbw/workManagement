<div class="tasks-container">
  <h2 class="tasks-title">Tasks</h2>
  <button class="btn-primary" (click)="getTasks()">Load Tasks</button>

  <div class="task-columns-container">
    <div class="task-column" *ngFor="let status of taskStatuses">
      <h3>{{ status }}</h3>
      <div *ngIf="getTasksByStatus(status).length > 0; else noTasksForStatus">
        <div class="task-card" *ngFor="let task of getTasksByStatus(status)">
          <h3>{{ task.title }}</h3>
          <p>{{ task.description }}</p>
          <p><strong>Task ID:</strong> {{ task.id }}</p>
          <p><strong>Project ID:</strong> {{ task.projectId }}</p>
          <p><strong>Assigned User ID:</strong> {{ task.assignedUserId }}</p>
          <p><strong>Due Date:</strong> {{ task.dueDate | date }}</p>
          <p><strong>Priority:</strong> {{ task.priority }}</p>

          <!-- Buttons to Edit or Delete -->
          <button class="btn-secondary" (click)="editTask(task)">Edit Task</button>
          <button class="btn-danger" (click)="deleteTask(task.id)">Delete Task</button>
        </div>
      </div>
      <ng-template #noTasksForStatus>
        <p class="no-tasks-message">No tasks for this status.</p>
      </ng-template>
    </div>
  </div>
</div>


<!-- Edit Task Form -->
<div *ngIf="selectedTask" class="edit-task-container">
  <h2>Edit Task</h2>
  <form (ngSubmit)="updateTask()">
    <div class="form-group">
      <input [(ngModel)]="selectedTask.title" name="title" placeholder="Task Title" class="input-field" required />
    </div>
    <div class="form-group">
      <input [(ngModel)]="selectedTask.description" name="description" placeholder="Task Description" class="input-field" />
    </div>
    <div class="form-group">
      <input [(ngModel)]="selectedTask.dueDate" name="dueDate" type="datetime-local" class="input-field" />
    </div>
    <div class="form-group">
      <input [(ngModel)]="selectedTask.priority" name="priority" type="number" class="input-field" placeholder="Priority" />
    </div>
    <div class="form-group">
      <input [(ngModel)]="selectedTask.projectId" name="projectId" type="number" class="input-field" placeholder="Project ID" />
    </div>
    <div class="form-group">
      <input [(ngModel)]="selectedTask.assignedUserId" name="assignedUserId" type="number" class="input-field" placeholder="Assigned User ID" />
    </div>
    <button class="btn-primary" type="submit">Update Task</button>
    <button class="btn-secondary" type="button" (click)="cancelEdit()">Cancel</button>
  </form>
</div>
